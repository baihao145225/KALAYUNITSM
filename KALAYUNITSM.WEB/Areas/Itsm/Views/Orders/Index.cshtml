@{
    Layout = "~/Views/Shared/_Index.cshtml";
}
<blockquote class="layui-elem-quote news_search">
    <div class="layui-inline">
        <form id="form" class="layui-form">
            <div class="layui-input-inline">
                <input type="text" id="keyword" placeholder="请输入关键字" class="layui-input search_input">
            </div>
            <a class="layui-btn search_btn layui-btn-small" id="btnSearch">查询</a>
        </form>
    </div>
    <div id="toolbar" class="layui-inline">
        <div id="layui-btn-group" class="layui-inline toolsTable"></div>
    </div>
</blockquote>
<div class="layui-form">
    <table id="gridList" lay-filter="gridList"></table>
</div>
@section scripts {
    <script type="text/javascript">
        var table = layui.table;
    
        initGrid();
        $("#btnSearch").click(initGrid);
        $("#toolbar").authorizeButton(window.location.pathname);

        function initGrid() {
            var _curr = 0;
            var _count = 0;
            var _keyword = $("#keyword").val();

            table.render({
                elem: '#gridList',
                id: 'gridList',
                url: '/Itsm/Orders/GetJsonData',
                cols: [[
                 { checkbox: true, fixed: true }
                 , { field: 'OrderId', title: '编号', sort: true, width: 180, templet: '#OrdersTpl' }
                 , { field: 'Name', title: '简要描述', width: 320 }
                 , { field: 'ContactsName', title: '联系人', sort: true, width: 100 }
                 , { field: 'RegisterTime', title: '登记时间', width: 170, sort: true }
                 , { field: 'PriorityName', title: '优先级', width: 140, sort: true }
                 , { field: 'CurrUserName', title: '处理人', width: 100, sort: true }
                 , { field: 'SlaTitle', title: '余时/超时', sort: true, width: 160, templet: '#FinishTimeTpl' }
                 , { field: 'StatusName', title: '状态', sort: true, templet: '#StatusTpl' }
                ]],
                curr: _curr,
                where: { keyword: _keyword }
            });
        }

        function btn_chk() {
            $.buttonOrder({
                title: "工单流转",
                width: "500px",
                height: "500px",
                content: "/Itsm/OrderChk/CheckInOrder"
            });
        }
        function btn_allocate() {
            $.buttonOrder({
                title: "工单分派",
                width: "500px",
                height: "500px",
                content: "/Itsm/OrderChk/AllocateOrder"
            });
        }
    </script>
}

