@{
    Layout = "~/Views/Shared/_Index.cshtml";
}
@model List<KALAYUNITSM.ENTITY.WeeklyReports.ReportsData>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>无标题文档</title>

    <link rel="stylesheet" type="text/css" href="../../Content/WeeklyReports/styles/simditor.css" />
    <link rel="stylesheet" type="text/css" href="../../Content/WeeklyReports/styles/bootstrap.css" />
    <!--<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>-->

    <script type="text/javascript" src="../../Content/WeeklyReports/scripts/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="../../Content/WeeklyReports/scripts/module.min.js"></script>
    <script type="text/javascript" src="../../Content/WeeklyReports/scripts/hotkeys.min.js"></script>
    <script type="text/javascript" src="../../Content/WeeklyReports/scripts/uploader.min.js"></script>
    <script type="text/javascript" src="../../Content/WeeklyReports/scripts/simditor.js"></script>
    <!--<script type="text/javascript" src="scripts/simditor.min.js"></script>-->
    <!--<script src="http://www.jq22.com/jquery/1.6.4/jquery.min.js"></script>-->
    <script type="text/javascript" src="../../Content/WeeklyReports/scripts/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="../../Content/WeeklyReports/jquery.reveal.js"></script>
    <style type="text/css">
        .reveal-modal-bg {
            position: fixed;
            height: 100%;
            width: 100%;
            z-index: 100;
            display: none;
            top: 0;
            left: 0;
            background: rgba(00, 00, 00, 0.8);
        }

        .reveal-modal {
            visibility: hidden;
            top: 150px;
            left: 50%;
            margin-left: -300px;
            width: 520px;
            position: absolute;
            z-index: 101;
            padding: 30px 40px 34px;
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
            border-radius: 5px;
            -moz-box-shadow: 0 0 10px rgba(0,0,0,.4);
            -webkit-box-shadow: 0 0 10px rgba(0,0,0,.4);
            -box-shadow: 0 0 10px rgba(0,0,0,.4);
            background-color: #FFF;
        }

            .reveal-modal.small {
                width: 200px;
                margin-left: -140px;
            }

            .reveal-modal.medium {
                width: 400px;
                margin-left: -240px;
            }

            .reveal-modal.large {
                width: 600px;
                margin-left: -340px;
            }

            .reveal-modal.xlarge {
                width: 800px;
                margin-left: -440px;
            }

            .reveal-modal .close-reveal-modal {
                font-size: 22px;
                line-height: 0.5;
                position: absolute;
                top: 8px;
                right: 11px;
                color: #333;
                text-shadow: 0 -1px 1px rbga(0,0,0,.6);
                font-weight: bold;
                cursor: pointer;
            }

        body {
            background-color: #F2F2F2;
        }
    </style>
    <!--[if lt IE 9]><style>.reveal-modal-bg{filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#cc000000,endColorstr=#cc000000);}</style><![endif]-->

    <script>
        var inputId;
        var id = 0;
        var UpdateFinalId = 0;
        var selectList = {
            "终端运维": "终端运维",
            "机房巡检": "机房巡检",
            "技术支持": "技术支持",
            "临时工作": "临时工作",
        };
        var workList = {
            "已完成": "A",
            "进展中": "B",
            "未开始": "C",
            "延期已完成": "D",
        };
        var dataTableList = {
            data: [
                {
                    "ProjectName": "终端运维",
                    "Content": "内容测试111",
                    "ChargeMan": "张三",
                    "Remark": "备注111",
                    "Type": "进展中",

                },
                {
                    "ProjectName": "机房巡检",
                    "Content": "内容测试222",
                    "ChargeMan": "李四",
                    "Remark": "备注222",
                    "Type": "已完成",
                },
                {
                    "ProjectName": "技术支持",
                    "Content": "内容测试333",
                    "ChargeMan": "王五",
                    "Remark": "备注333",
                    "Type": "延期已完成",
                }
            ]
        }
        $(document).ready(function () {

            var inputs = $("input");                    //下边是初次加载时去除HTML标签的方法 begin
            $(inputs).each(function (j)
            {
                //   alert("0");
                var inputView = $(this);
                var inId = inputView.attr("id");
                if (inId != undefined && inId.indexOf("View") > 0)
                {
                    var description = inputView.val();
                    description = description.replace(/(\n)/g, "");
                    description = description.replace(/(\t)/g, "");
                    description = description.replace(/(\r)/g, "");
                    description = description.replace(/<\/?[^>]*>/g, "");
                    description = description.replace(/\s*/g, "");
                    description = description.replace("&nbsp;", "");

                    inputView.val(description);
                }
            });                                                     //去除HTML标签END


        });
        function openDataEdit(e) {
            inputId = $(e);
            if (inputId.val().length == 0) {
                $(".simditor-body").html("<p>&nbsp;</p>");           //有个bug，如果是空的弹出来输入法会有点问题，加一个判定
            }
            else {
                $(".simditor-body").html(inputId.val());
            }

            $('#click1').click();
            $(".simditor-body").focus();
        }
        function openDataEditView(e) {

            var inputView = $(e);
            var nameOld = inputView.attr("id");
            //ListTest[0].Content
            var endName = nameOld.substr(nameOld.indexOf(".") + 1, nameOld.indexOf("View") - nameOld.indexOf(".") - 1);
            var firName = nameOld.substr(0, nameOld.indexOf("."));
            var finalName = firName + "." + endName;         //获取实际取值富文本编辑器的ID

            var trParent = inputView.parent().parent();      //获取tr
            $(trParent).children().each(function (j) {
                try {
                    var inputItemTd = $(this);     //每一行tr里的td
                    $(inputItemTd).children().each(function (k) {
                        var inputItem = $(this);     //这是每一个td里的input框
                        var name = inputItem.attr("name");
                        if (name != undefined) {

                            if (name == finalName)         //找到content结点
                            {
                                inputId = inputItem;
                                if (inputId.val().length == 0) {
                                    $(".simditor-body").html("<p>&nbsp;</p>");           //有个bug，如果是空的弹出来输入法会有点问题，加一个判定
                                }
                                else {
                                    $(".simditor-body").html(inputId.val());
                                }

                                $('#click1').click();
                                $(".simditor-body").focus();
                                return;
                            }

                        }
                    });
                } catch (e) {

                }

            })

        }
        function saveData() {
            $('.reveal-modal-bg').click();
            inputId.val($("#editor").val());

            var trParent = inputId.parent().parent();      //获取tr
            $(trParent).children().each(function (j) {
                try {
                    var inputItemTd = $(this);     //每一行tr里的td
                    $(inputItemTd).children().each(function (k) {
                        var inputItem = $(this);     //这是每一个td里的input框
                        var name = inputItem.attr("name");
                        if (name != undefined) {
                            if (name == (inputId.attr("name") + "View"))         //找到content结点
                            {
                                var description = $("#editor").val();                    //去除HTML标签 显示数据预览
                                description = description.replace(/(\n)/g, "");
                                description = description.replace(/(\t)/g, "");
                                description = description.replace(/(\r)/g, "");
                                description = description.replace(/<\/?[^>]*>/g, "");
                                description = description.replace(/\s*/g, "");
                                description = description.replace("&nbsp;", "");
                                inputItem.val(description);
                                return;
                            }
                        }
                    });
                } catch (e) {

                }

            })

            UpdateNumber();
        }
        function saveDataOld() {
            $('.reveal-modal-bg').click();
            inputId.val($("#editor").val());
            UpdateNumber();
        }

        //老方法只能调整一个 新的可以调整所有的
        function UpdateNumberOld()                  //这个方法是将所有输入框的name id按照数字顺序重新命名 防止有ListTest[0].Name，ListTest[3].Name这种错乱的，方便MVC直接赋值
        {
            $('#TableData tr').each(function (i) {
                var dataItemTr = $(this);      //找到table里的每一行tr
                $(dataItemTr).children().each(function (j) {
                    try {
                        var inputItemTd = $(this);     //每一行tr里的td
                        $(inputItemTd).children().each(function (k) {
                            var inputItem = $(this);     //这是每一个td里的input框
                            var name = inputItem.attr("name");
                            if (name != undefined) {
                                //alert(name);
                                if (name.indexOf("No") > 0)          //这个是检查序号的，排序
                                {
                                    inputItem.val((i + 1));
                                }
                                var name1 = "111";
                                var nameNumberTemp = name.substr(name.indexOf("[") + 1, name.indexOf("]") - name.indexOf("[") - 1);  //取出来的错乱数字
                                name = name.replace(nameNumberTemp, i);                      //重新修改所有输入框的ID NAME的数字顺序
                                inputItem.attr("name", name);        //重新命名Name
                                inputItem.attr("id", name);          //重新命名ID
                            }
                        });
                    } catch (e) {

                    }

                })
            })
        }
        function UpdateNumber()                  //这个方法是将所有输入框的name id按照数字顺序重新命名 防止有ListTest[0].Name，ListTest[3].Name这种错乱的，方便MVC直接赋值
        {
            UpdateFinalId = 0;
            $('#TableData tr').each(function (i) {
                var dataItemTr = $(this);      //找到table里的每一行tr
                $(dataItemTr).children().each(function (j) {
                    try {
                        var inputItemTd = $(this);     //每一行tr里的td
                        $(inputItemTd).children().each(function (k) {
                            var inputItem = $(this);     //这是每一个td里的input框
                            var name = inputItem.attr("name");
                            if (name != undefined) {
                                //alert(name);
                                if (name.indexOf("ContentNumber") > 0)          //这个是检查序号的，排序
                                {
                                    inputItem.val((i + 1));
                                }
                                var name1 = "111";
                                var nameNumberTemp = name.substr(name.indexOf("[") + 1, name.indexOf("]") - name.indexOf("[") - 1);  //取出来的错乱数字
                                name = name.replace(nameNumberTemp, UpdateFinalId);                      //重新修改所有输入框的ID NAME的数字顺序
                                inputItem.attr("name", name);        //重新命名Name
                                inputItem.attr("id", name);          //重新命名ID


                            }
                        });
                    } catch (e) {

                    }

                })
                UpdateFinalId++;
            })
            $('#TableDataNext tr').each(function (i) {
                var dataItemTr = $(this);      //找到table里的每一行tr
                $(dataItemTr).children().each(function (j) {
                    try {
                        var inputItemTd = $(this);     //每一行tr里的td
                        $(inputItemTd).children().each(function (k) {
                            var inputItem = $(this);     //这是每一个td里的input框
                            var name = inputItem.attr("name");
                            if (name != undefined) {
                                //alert(name);
                                if (name.indexOf("ContentNumber") > 0)          //这个是检查序号的，排序
                                {
                                    inputItem.val((i + 1));
                                }
                                var name1 = "111";
                                var nameNumberTemp = name.substr(name.indexOf("[") + 1, name.indexOf("]") - name.indexOf("[") - 1);  //取出来的错乱数字
                                name = name.replace(nameNumberTemp, UpdateFinalId);                      //重新修改所有输入框的ID NAME的数字顺序
                                inputItem.attr("name", name);        //重新命名Name
                                inputItem.attr("id", name);          //重新命名ID


                            }
                        });

                    } catch (e) {

                    }

                })
                UpdateFinalId++;
            })
            $('#TableDataProblem tr').each(function (i) {
                var dataItemTr = $(this);      //找到table里的每一行tr
                $(dataItemTr).children().each(function (j) {
                    try {
                        var inputItemTd = $(this);     //每一行tr里的td
                        $(inputItemTd).children().each(function (k) {
                            var inputItem = $(this);     //这是每一个td里的input框
                            var name = inputItem.attr("name");
                            if (name != undefined) {
                                //alert(name);
                                if (name.indexOf("ContentNumber") > 0)          //这个是检查序号的，排序
                                {
                                    inputItem.val((i + 1));
                                }
                                var name1 = "111";
                                var nameNumberTemp = name.substr(name.indexOf("[") + 1, name.indexOf("]") - name.indexOf("[") - 1);  //取出来的错乱数字
                                name = name.replace(nameNumberTemp, UpdateFinalId);                      //重新修改所有输入框的ID NAME的数字顺序
                                inputItem.attr("name", name);        //重新命名Name
                                inputItem.attr("id", name);          //重新命名ID


                            }
                        });

                    } catch (e) {

                    }

                })
                UpdateFinalId++;
            })
        }

        function checkSelect(item)                   //每个选择项目只能用一次，多了就要发出警告
        {
            var SelectValue = $(item);
            var count = 0;
            $('#TableData select').each(function (i) {
                var selectTemp = $(this);
                if (selectTemp.val() == SelectValue.val()) {
                    count++;
                    if (count >= 2) {
                        alert("不可添加重复项目");
                        SelectValue.val("");
                        count = 0;
                        return false;
                    }
                }


            });
        }
        function addThisWeek() {
            var FormData = $('#TableData');
            var html = "    <tr id =" + id + ">";
            html += "<td class=\"col-xs-1\">";
            html += "<input  class=\"form-control\" type=\"text\" name=\"ListTest[" + id + "].ContentNumber\" id=\"ListTest[" + id + "].ContentNumber\" value=" + (id + 1) + " readonly />"
            html += " </td>";
            html += " <td>";
            html += "<select  class=\"form-control\" name=\"ListTest[" + id + "].ProjectName\" id=\"ListTest[" + id + "].ProjectName\"required=\"required\" onchange=\"checkSelect(this);\">";
            html += "<option disabled selected value>--请选择--</option>";
            for (var i in selectList) {
                html += "<option value=" + i + ">" + selectList[i] + "</option>";
            }
            html += "</select></td>";

            html += "<td>";
            html += " <input type=\"hidden\"  class=\"form-control\" name=\"ListTest[" + id + "].Content\" id=\"ListTest[" + id + "].Content\"  onclick=\"openDataEdit(this);\" />";
            html += " <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].ContentView\" id=\"ListTest[" + id + "].ContentView\"  onclick=\"openDataEditView(this);\" />";
            html += " </td>";
            html += "  <td>";
            html += "   <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].LiablePerson\"required=\"required\" id=\"ListTest[" + id + "].LiablePerson\"  />";
            html += " </td>";
            html += "  <td>";
            html += "   <input type=\"date\"  class=\"form-control\" name=\"ListTest[" + id + "].StartTime\"required=\"required\" id=\"ListTest[" + id + "].StartTime\"  />";
            html += " </td>";
            html += "  <td>";
            html += "   <input type=\"date\"  class=\"form-control\" name=\"ListTest[" + id + "].EndTime\"required=\"required\" id=\"ListTest[" + id + "].EndTime\"  />";
            html += " </td>";
            html += "  <td>";
            html += "   <input type=\"hidden\"  class=\"form-control\" name=\"ListTest[" + id + "].CompleteStatus\" id=\"ListTest[" + id + "].CompleteStatus\" onclick=\"openDataEdit(this);\"  />";

            html += "   <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].CompleteStatusView\" id=\"ListTest[" + id + "].CompleteStatusView\" onclick=\"openDataEditView(this);\"  />";
            html += " </td>";
            html += " <td>";
            html += "<select  class=\"form-control\" name=\"ListTest[" + id + "].WorkType\" id=\"ListTest[" + id + "].WorkType\">";
            for (var i in workList) {
                html += "<option value=" + workList[i] + ">" + i + "</option>";
            }
            html += "</select></td>";



            html += "    <td>";
            html += "   <input type=\"hidden\" class=\"form-control\" name=\"ListTest[" + id + "].ContentType\" id=\"ListTest[" + id + "].ContentType\" value=\"1\"   />";
            html += "  <button type=\"button\"  onclick=\"DeleteDateItem('" + id + "')\" class=\"btn btn-default\">删除行</button>";
            html += "</td>";

            html += "</tr>";
            //var html = "<div class=\"dataItem\" id=\"" + id + "\">";
            //html += "<input type=\"text\" name=\"ListTest[" + id + "].Name\" id=\"ListTest[" + id + "].Name\" onclick=\"openDataEdit(this);\" /><input type=\"text\" name=\"ListTest[" + id + "].Age\" id=\"ListTest[" + id + "].Age\" onclick=\"openDataEdit(this);\" /> ";
            //html += "<button type=\"button\" onclick=\"DeleteDateItem(" + id + ")\">删除行</button></div>";
            id++;
            $(FormData).append(html);
        }
        function addNextWeek() {
            var FormData = $('#TableDataNext');
            var html = "    <tr id =" + id + ">";
            html += "<td class=\"col-xs-1\">";
            html += "<input  class=\"form-control\" type=\"text\" name=\"ListTest[" + id + "].ContentNumber\" id=\"ListTest[" + id + "].ContentNumber\" value=" + (id + 1) + " readonly />"
            html += " </td>";
            html += " <td>";
            html += "<select  class=\"form-control\" name=\"ListTest[" + id + "].ProjectName\" id=\"ListTest[" + id + "].ProjectName\"required=\"required\" onchange=\"checkSelect(this);\">";
            html += "<option disabled selected value>--请选择--</option>";
            for (var i in selectList) {
                html += "<option value=" + i + ">" + selectList[i] + "</option>";
            }
            html += "</select></td>";

            html += "<td>";
            html += " <input type=\"hidden\"  class=\"form-control\" name=\"ListTest[" + id + "].Content\" id=\"ListTest[" + id + "].Content\"  onclick=\"openDataEdit(this);\" />";

            html += " <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].ContentView\" id=\"ListTest[" + id + "].ContentView\"  onclick=\"openDataEditView(this);\" />";
            html += " </td>";
            html += "  <td>";
            html += "   <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].LiablePerson\" required=\"required\" id=\"ListTest[" + id + "].LiablePerson\"  />";
            html += " </td>";
            html += "  <td>";
            html += "   <input type=\"date\"  class=\"form-control\" name=\"ListTest[" + id + "].StartTime\"required=\"required\" id=\"ListTest[" + id + "].StartTime\"  />";
            html += " </td>";
            html += "  <td>";
            html += "   <input type=\"date\"  class=\"form-control\" name=\"ListTest[" + id + "].EndTime\" required=\"required\" id=\"ListTest[" + id + "].EndTime\"  />";
            html += " </td>";
            html += "  <td>";
            html += "   <input type=\"hidden\"  class=\"form-control\" name=\"ListTest[" + id + "].Remark\" id=\"ListTest[" + id + "].Remark\" onclick=\"openDataEdit(this);\"  />";

            html += "   <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].RemarkView\" id=\"ListTest[" + id + "].RemarkView\" onclick=\"openDataEditView(this);\"  />";
            html += " </td>";
            //html += " <td>";
            //html += "<select  class=\"form-control\" name=\"ListTest[" + id + "].WorkType\" id=\"ListTest[" + id + "].WorkType\">";
            //for (var i in workList) {
            //    html += "<option value=" + workList[i] + ">" + i + "</option>";
            //}
            //html += "</select></td>";
            html += "    <td>";

            html += "   <input type=\"hidden\" class=\"form-control\" name=\"ListTest[" + id + "].ContentType\" id=\"ListTest[" + id + "].ContentType\" value=\"2\"   />";

            html += "  <button type=\"button\"  onclick=\"DeleteDateItem('" + id + "')\" class=\"btn btn-default\">删除行</button>";
            html += "</td>";

            html += "</tr>";
            //var html = "<div class=\"dataItem\" id=\"" + id + "\">";
            //html += "<input type=\"text\" name=\"ListTest[" + id + "].Name\" id=\"ListTest[" + id + "].Name\" onclick=\"openDataEdit(this);\" /><input type=\"text\" name=\"ListTest[" + id + "].Age\" id=\"ListTest[" + id + "].Age\" onclick=\"openDataEdit(this);\" /> ";
            //html += "<button type=\"button\" onclick=\"DeleteDateItem(" + id + ")\">删除行</button></div>";
            id++;
            $(FormData).append(html);
        }
        function addProblem() {
            var FormData = $('#TableDataProblem');
            var html = "    <tr id =" + id + ">";
            html += "<td class=\"col-xs-1\">";
            html += "<input  class=\"form-control\" type=\"text\" name=\"ListTest[" + id + "].ContentNumber\" id=\"ListTest[" + id + "].ContentNumber\" value=" + (id + 1) + " readonly />"
            html += " </td>";
            //html += " <td>";
            //html += "<select  class=\"form-control\" name=\"ListTest[" + id + "].ProjectName\" id=\"ListTest[" + id + "].ProjectName\" onchange=\"checkSelect(this);\">";
            //html += "<option disabled selected value>--请选择--</option>";
            //for (var i in selectList) {
            //    html += "<option value=" + i + ">" + selectList[i] + "</option>";
            //}
            //html += "</select></td>";

            html += "<td>";
            html += " <input type=\"hidden\"  class=\"form-control\" name=\"ListTest[" + id + "].Problem\" id=\"ListTest[" + id + "].Problem\"  onclick=\"openDataEdit(this);\" />";

            html += " <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].ProblemView\" id=\"ListTest[" + id + "].ProblemView\"  onclick=\"openDataEditView(this);\" />";
            html += " </td>";
            //html += "  <td>";
            //html += "   <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].LiablePerson\" id=\"ListTest[" + id + "].LiablePerson\"  />";
            //html += " </td>";
            //html += "  <td>";
            //html += "   <input type=\"date\"  class=\"form-control\" name=\"ListTest[" + id + "].StartTime\" id=\"ListTest[" + id + "].StartTime\"  />";
            //html += " </td>";
            //html += "  <td>";
            //html += "   <input type=\"date\"  class=\"form-control\" name=\"ListTest[" + id + "].EndTime\" id=\"ListTest[" + id + "].EndTime\"  />";
            //html += " </td>";
            html += "  <td>";
            html += "   <input type=\"hidden\"  class=\"form-control\" name=\"ListTest[" + id + "].Result\" id=\"ListTest[" + id + "].Result\" onclick=\"openDataEdit(this);\"  />";

            html += "   <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].ResultView\" id=\"ListTest[" + id + "].ResultView\" onclick=\"openDataEditView(this);\"  />";
            html += " </td>";
            html += "  <td>";
            html += "   <input type=\"hidden\"  class=\"form-control\" name=\"ListTest[" + id + "].Solution\" id=\"ListTest[" + id + "].Solution\" onclick=\"openDataEdit(this);\"  />";

            html += "   <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].SolutionView\" id=\"ListTest[" + id + "].SolutionView\" onclick=\"openDataEditView(this);\"  />";
            html += " </td>";
            //html += " <td>";
            //html += "<select  class=\"form-control\" name=\"ListTest[" + id + "].WorkType\" id=\"ListTest[" + id + "].WorkType\">";
            //for (var i in workList) {
            //    html += "<option value=" + workList[i] + ">" + i + "</option>";
            //}
            //html += "</select></td>";


            html += "    <td>";
            html += "   <input type=\"hidden\" class=\"form-control\" name=\"ListTest[" + id + "].ContentType\" id=\"ListTest[" + id + "].ContentType\" value=\"3\"   />";

            html += "  <button type=\"button\"  onclick=\"DeleteDateItem('" + id + "')\" class=\"btn btn-default\">删除行</button>";
            html += "</td>";

            html += "</tr>";
            //var html = "<div class=\"dataItem\" id=\"" + id + "\">";
            //html += "<input type=\"text\" name=\"ListTest[" + id + "].Name\" id=\"ListTest[" + id + "].Name\" onclick=\"openDataEdit(this);\" /><input type=\"text\" name=\"ListTest[" + id + "].Age\" id=\"ListTest[" + id + "].Age\" onclick=\"openDataEdit(this);\" /> ";
            //html += "<button type=\"button\" onclick=\"DeleteDateItem(" + id + ")\">删除行</button></div>";
            id++;
            $(FormData).append(html);
        }
        function DeleteDateItem(idNumber) {
            $("#" + idNumber).remove();
        }
        function getTableData() {
            var FormData = $('#getTableData');
            $(FormData).html("");
            var id = 0;
            for (var z = 0; z < dataTableList.data.length; z++) {
                var item = dataTableList.data[z];
                var html = "    <tr id =l" + id + ">";
                html += "<td  class=\"col-xs-1\">";
                html += "<input type=\"text\" class=\"form-control\" name=\"ListTest[" + id + "].No\" id=\"ListTest[" + id + "].No\" value=l" + (id + 1) + " readonly />"
                html += " </td>";
                html += " <td>";
                html += "<select class=\"form-control\" name=\"ListTest[" + id + "].ProjectName\" id=\"ListTest[" + id + "].ProjectName\"  disabled=\"true\" onchange=\"checkSelect(this);\">";
                html += "<option disabled selected value>--请选择--</option>";
                for (var i in selectList) {
                    if (item.ProjectName == i) {
                        html += "<option value=" + i + "  selected=\"selected\" >" + selectList[i] + "</option>";
                    }
                    else {
                        html += "<option value=" + i + ">" + selectList[i] + "</option>";
                    }

                }
                html += "</select></td>";



                html += "<td>";
                html += " <input type=\"text\" class=\"form-control\" name=\"ListTest[" + id + "].Content\" id=\"ListTest[" + id + "].Content\" value='" + item.Content + "'  onclick=\"openDataEdit(this);\" />";
                html += " </td>";
                html += "  <td>";
                html += "   <input type=\"text\" class=\"form-control\" name=\"ListTest[" + id + "].ChargeMan\" id=\"ListTest[" + id + "].ChargeMan\" value='" + item.ChargeMan + "' />";
                html += " </td>";
                html += "  <td>";
                html += "   <input type=\"date\" class=\"form-control\" name=\"ListTest[" + id + "].Time\" id=\"ListTest[" + id + "].Time\"  />";
                html += " </td>";
                html += "  <td>";
                html += "   <input type=\"date\" class=\"form-control\" name=\"ListTest[" + id + "].EndTime\" id=\"ListTest[" + id + "].EndTime\"  />";
                html += " </td>";
                html += "  <td>";
                html += "   <input type=\"text\" class=\"form-control\" name=\"ListTest[" + id + "].Remark\" id=\"ListTest[" + id + "].Remark\" value='" + item.Remark + "' onclick=\"openDataEdit(this);\"  />";
                html += " </td>";
                html += " <td>";
                html += "<select class=\"form-control\" name=\"ListTest[" + id + "].Type\" id=\"ListTest[" + id + "].Type\" value='" + item.Type + "'>";
                for (var i in workList) {
                    if (item.Type == i) {
                        html += "<option value=" + workList[i] + " selected=\"selected\">" + i + "</option>";
                    }
                    else {
                        html += "<option value=" + workList[i] + ">" + i + "</option>";
                    }

                }
                html += "</select></td>";
                html += "    <td>";
                html += "  <button type=\"button\" onclick=\"DeleteDateItem('l" + id + "')\" class=\"btn btn-default\">删除行</button>";
                html += "</td>";

                html += "</tr>";
                //var html = "<div class=\"dataItem\" id=\"" + id + "\">";
                //html += "<input type=\"text\" name=\"ListTest[" + id + "].Name\" id=\"ListTest[" + id + "].Name\" onclick=\"openDataEdit(this);\" /><input type=\"text\" name=\"ListTest[" + id + "].Age\" id=\"ListTest[" + id + "].Age\" onclick=\"openDataEdit(this);\" /> ";
                //html += "<button type=\"button\" onclick=\"DeleteDateItem(" + id + ")\">删除行</button></div>";
                id++;
                $(FormData).append(html);
            }
        }
        function SubmitUpdate(){
            UpdateNumber();
            return true;
        }
    </script>

</head>
<body>

    @using (Html.BeginForm(null, null, FormMethod.Post, new { onsubmit = "return SubmitUpdate();" }))
    {
        <input type="hidden" name="lId" value="@ViewBag.lId" />
        <input type="hidden" name="ProjectName" value="@ViewBag.ProjectName" />
        <h1 class="container-fluid" style="text-align:center;">个人运维工作周报</h1>

        <span class="col-sm-3">项目名称：@ViewBag.ProjectName</span>
        <span class="col-sm-3">
            汇报日期：
            <select name="ReportWeekDate">
                @{
        if (ViewBag.ReportWeekDate == "1")
        {
            <option value="1" selected=selected>本周</option>
                    <option value="2">上周</option>
        }
        else
        {
            <option value="1">本周</option>
                    <option value="2" selected=selected>上周</option>
        }
                }

            </select>
        </span>
        <span class="col-sm-3">汇报人：@ViewBag.Author</span>
        <span class="col-sm-3">
            紧急度：
            <select name="Level">

                @{
        if (ViewBag.EmergencyLevel == "1")
        {
            <option value="1" selected=selected>低</option>
                    <option value="2">中</option>
                    <option value="3">高</option>
        }
        if (ViewBag.EmergencyLevel == "2")
        {
            <option value="1">低</option>
                    <option value="2" selected=selected>中</option>
                    <option value="3">高</option>
        }
        if (ViewBag.EmergencyLevel == "3")
        {
            <option value="1">低</option>
                    <option value="2">中</option>
                    <option value="3" selected=selected>高</option>

        }
                }
            </select>
        </span>
        <hr />
        <!--<button type="button" onclick="UpdateNumber();">调整数字</button>-->

        <div id="getData" style="display:none;">
            <h4 class="container-fluid" style="text-align:center;">固有工作</h4>
            <table class="table table-striped">
                <tr>
                    <td>
                        序号
                    </td>
                    <td>
                        工作项目
                    </td>
                    <td>
                        工作内容
                    </td>
                    <td>
                        负责人
                    </td>
                    <td>
                        开始日期
                    </td>
                    <td>
                        结束日期
                    </td>
                    <td>
                        完成情况
                    </td>
                    <td>
                        状态
                    </td>
                    <td>
                        删除
                    </td>
                </tr>

                <tbody id="getTableData" class=".table-striped"></tbody>

            </table>
            <button type="button" onclick="getTableData();" class="btn btn-default ">获取工作</button>
        </div>


        <div id="FormData">
            <h4 class="container-fluid" style="text-align:center;">本周工作任务及执行情况</h4>
            <table class="table table-striped">
                <tr>
                    <td>
                        序号
                    </td>
                    <td>
                        工作项目
                    </td>
                    <td>
                        工作内容
                    </td>
                    <td>
                        负责人
                    </td>
                    <td>
                        开始日期
                    </td>
                    <td>
                        结束日期
                    </td>
                    <td>
                        完成情况
                    </td>
                    <td>
                        状态
                    </td>
                    <td>
                        删除
                    </td>
                </tr>

                <tbody id="TableData">
                    @{
        if (Model != null)
        {
            int i = 0;
            foreach (var item in Model)
            {
                if (item.ContentType == 1)
                {
                    string trId = "now" + i;
                    string trDid = "\"now" + i + "\"";
                    <tr id="@trId">
                        <td class="col-xs-1">
                            <input type="text" readonly="readonly" class="form-control" name="ListTest[@i].ContentNumber" id="ListTest[@i].ContentNumber" value="@item.ContentNumber" />
                        </td>
                        <td class="col-xs-1">
                            <select class="form-control" name="ListTest[@i].ProjectName" id="ListTest[@i].ProjectName" required="required">

                                @{
                    if (item.ProjectName == "终端运维")
                    {
                        <option value="终端运维" selected=selected>终端运维</option>
                    }
                    else
                    {
                        <option value="终端运维">终端运维</option>
                    }
                    if (item.ProjectName == "机房巡检")
                    {
                        <option value="机房巡检" selected=selected>机房巡检</option>
                    }
                    else
                    {
                        <option value="机房巡检">机房巡检</option>
                    }
                    if (item.ProjectName == "技术支持")
                    {
                        <option value="技术支持" selected=selected>技术支持</option>
                    }
                    else
                    {
                        <option value="技术支持">技术支持</option>
                    }
                    if (item.ProjectName == "临时工作")
                    {
                        <option value="临时工作" selected=selected>临时工作</option>
                    }
                    else
                    {
                        <option value="临时工作">临时工作</option>
                    }
                                }
                            </select>
                        </td>

                        @*<td >
                                <input type="text" class="form-control" name="ListTest[@i].ProjectName" id="ListTest[@i].ProjectName" value="@item.ProjectName" />
                            </td>*@
                        <td>

                            <input type="hidden" class="form-control" name="ListTest[@i].Content" id="ListTest[@i].Content" value="@item.Content" onclick="openDataEdit(this);" />

                            <input type="text" class="form-control" name="ListTest[@i].ContentView" id="ListTest[@i].ContentView" value="@item.Content" onclick="openDataEditView(this);" />
                        </td>
                        <td>
                            <input type="text" class="form-control" name="ListTest[@i].LiablePerson" id="ListTest[@i].LiablePerson" required="required" value="@item.LiablePerson" />
                        </td>
                        <td>
                            @{string datetemp = item.StartTime.Value.ToString("yyyy-MM-dd");}
                            <input type="date" class="form-control" name="ListTest[@i].StartTime" id="ListTest[@i].StartTime" required="required" value="@datetemp" />
                        </td>
                        <td>
                            @{ datetemp = item.EndTime.Value.ToString("yyyy-MM-dd");}
                            <input type="date" class="form-control" name="ListTest[@i].EndTime" id="ListTest[@i].EndTime" required="required" value="@datetemp" />
                        </td>
                        <td>
                            <input type="hidden" class="form-control" name="ListTest[@i].CompleteStatus" id="ListTest[@i].CompleteStatus" value="@item.CompleteStatus" onclick="openDataEdit(this);" />
                            <input type="text" class="form-control" name="ListTest[@i].CompleteStatusView" id="ListTest[@i].CompleteStatusView" value="@item.CompleteStatus" onclick="openDataEditView(this);" />
                        </td>
                        <td>
                            <select name="ListTest[@i].WorkType" class="form-control">
                                @{
                    if (item.WorkType == "A")
                    {
                        <option value="A" selected=selected>已完成</option>
                                    <option value="B">进展中</option>
                                    <option value="C">未开始</option>
                                    <option value="D">延期已完成</option>
                    }
                    if (item.WorkType == "B")
                    {
                        <option value="A">已完成</option>
                                    <option value="B" selected=selected>进展中</option>
                                    <option value="C">未开始</option>
                                    <option value="D">延期已完成</option>
                    }
                    if (item.WorkType == "C")
                    {
                        <option value="A">已完成</option>
                                    <option value="B">进展中</option>
                                    <option value="C" selected=selected>未开始</option>
                                    <option value="D">延期已完成</option>
                    }
                    if (item.WorkType == "D")
                    {
                        <option value="已完成">已完成</option>
                                    <option value="进展中">进展中</option>
                                    <option value="未开始">未开始</option>
                                    <option value="延期已完成" selected=selected>延期已完成</option>
                    }

                                }
                            </select>
                            <input type="hidden" class="form-control" name="ListTest[@i].ContentType" id="ListTest[@i].ContentType" value="1" />
                        </td>
                        <td>
                            <button type="button" onclick="DeleteDateItem(@trDid)" class="btn btn-default">删除行</button>
                        </td>
                    </tr>
                    i++;
                }
            }
        }

                    }
                </tbody>




            </table>
            <button type="button" id="addForm" class="btn btn-default" onclick="addThisWeek();">增加</button>



        </div>

        <div id="NextData">
            <h4 class="container-fluid" style="text-align:center;">下周工作计划</h4>
            <table class="table table-striped">
                <tr>
                    <td>
                        序号
                    </td>
                    <td>
                        工作项目
                    </td>
                    <td>
                        工作内容
                    </td>
                    <td>
                        负责人
                    </td>
                    <td>
                        开始日期
                    </td>
                    <td>
                        结束日期
                    </td>
                    @*<td>
                            完成情况
                        </td>*@
                    <td>
                        备注
                    </td>
                    <td>
                        删除
                    </td>
                </tr>

                <tbody id="TableDataNext">
                    @{
        if (Model != null)
        {
            int i = 0;
            foreach (var item in Model)
            {
                if (item.ContentType == 2)
                {
                    string trId = "next" + i;
                    string trDid = "\"next" + i + "\"";
                    <tr id="@trId">

                        <td class="col-xs-1">
                            <input type="text" readonly="readonly" class="form-control" name="ListTest[@i].ContentNumber" id="ListTest[@i].ContentNumber" value="@item.ContentNumber" />
                        </td>
                        <td>
                            <input type="text" class="form-control" name="ListTest[@i].ProjectName" id="ListTest[@i].ProjectName" value="@item.ProjectName" />
                        </td>
                        <td>
                            <input type="hidden" class="form-control" name="ListTest[@i].Content" id="ListTest[@i].Content" value="@item.Content" onclick="openDataEdit(this);" />
                            <input type="text" class="form-control" name="ListTest[@i].ContentView" id="ListTest[@i].ContentView" value="@item.Content" onclick="openDataEditView(this);" />
                        </td>
                        <td>
                            <input type="text" class="form-control" name="ListTest[@i].LiablePerson" id="ListTest[@i].LiablePerson" required="required" value="@item.LiablePerson" />
                        </td>
                        <td>
                            @{string datetemp = item.StartTime.Value.ToString("yyyy-MM-dd");}
                            <input type="date" class="form-control" name="ListTest[@i].StartTime" id="ListTest[@i].StartTime" required="required" value="@datetemp" />
                        </td>
                        <td>
                            @{ datetemp = item.EndTime.Value.ToString("yyyy-MM-dd");}
                            <input type="date" class="form-control" name="ListTest[@i].EndTime" id="ListTest[@i].EndTime" required="required" value="@datetemp" />
                        </td>
                        <td>
                            <input type="hidden" class="form-control" name="ListTest[@i].Remark" id="ListTest[@i].Remark" value="@item.Remark" onclick="openDataEdit(this);" />
                            <input type="text" class="form-control" name="ListTest[@i].RemarkView" id="ListTest[@i].RemarkView" value="@item.Remark" onclick="openDataEditView(this);" />
                            <input type="hidden" class="form-control" name="ListTest[@i].ContentType" id="ListTest[@i].ContentType" value="2" />
                        </td>
                        <td>
                            <button type="button" onclick="DeleteDateItem(@trDid)" class="btn btn-default">删除行</button>
                        </td>
                    </tr>
                             i++;
                }
            }
        }}
                </tbody>


            </table>
            <button type="button" id="addFormNext" class="btn btn-default" onclick="addNextWeek();">增加</button>


        </div>

        <div id="ProblemData">
            <h4 class="container-fluid" style="text-align:center;">发现问题、建议及解决计划</h4>
            <table class="table table-striped">
                <tr>
                    <td>
                        序号
                    </td>
                    @*<td>
                            工作项目
                        </td>*@
                    <td>
                        问题
                    </td>
                    @*<td>
                            负责人
                        </td>*@
                    @*<td>
                            开始日期
                        </td>
                        <td>
                            结束日期
                        </td>*@
                    <td>
                        原因
                    </td>
                    <td>
                        解决方案
                    </td>
                    <td>
                        删除
                    </td>
                </tr>

                <tbody id="TableDataProblem">
                    @{
        if (Model != null)
        {

            foreach (var item in Model)
            {
                int i = 0;
                if (item.ContentType == 3)
                {
                    string trId = "problem" + i;
                    string trDid = "\"problem" + i + "\"";
                    <tr id="@trId">
                        <td class="col-xs-1">
                            <input type="text" readonly="readonly" class="form-control" name="ListTest[@i].ContentNumber" id="ListTest[@i].ContentNumber" value="@item.ContentNumber" />
                        </td>
                        <td>
                            <input type="hidden" class="form-control" name="ListTest[@i].Problem" id="ListTest[@i].Problem" value="@item.Problem" onclick="openDataEdit(this);" />
                            <input type="text" class="form-control" name="ListTest[@i].ProblemView" id="ListTest[@i].ProblemView" value="@item.Problem" onclick="openDataEditView(this);" />
                        </td>
                        <td>
                            <input type="hidden" class="form-control" name="ListTest[@i].Result" id="ListTest[@i].Result" value="@item.Result" onclick="openDataEdit(this);" />
                            <input type="text" class="form-control" name="ListTest[@i].ResultView" id="ListTest[@i].ResultView" value="@item.Result" onclick="openDataEditView(this);" />
                        </td>
                        <td>
                            <input type="hidden" class="form-control" name="ListTest[@i].Solution" id="ListTest[@i].Solution" value="@item.Solution" onclick="openDataEdit(this);" />
                            <input type="text" class="form-control" name="ListTest[@i].SolutionView" id="ListTest[@i].SolutionView" value="@item.Solution" onclick="openDataEditView(this);" />
                            <input type="hidden" class="form-control" name="ListTest[@i].ContentType" id="ListTest[@i].ContentType" value="3" />
                        </td>
                        <td>
                            <button type="button" onclick="DeleteDateItem(@trDid)" class="btn btn-default">删除行</button>
                        </td>
                    </tr>
                    i++;
                }
            }
        }}
                </tbody>

                <!--<tr>
                    <td>
                        <input type="text" name="ListTest[0].No" id="ListTest[0].No" />
                    </td>
                    <td>
                        <select ></select>

                    </td>
                   <td>
                       <input type="text" name="ListTest[0].Content" onclick="openDataEdit(this);" id="ListTest[0].Content" />
                   </td>
                    <td>
                        <input type="text" name="ListTest[0].ChargeMan" id="ListTest[0].ChargeMan" />
                    </td>
                    <td>
                        <input type="date" name="ListTest[0].Time" id="ListTest[0].Time" />
                    </td>
                    <td>
                        <input type="text" name="ListTest[0].Remark" id="ListTest[0].Remark" />
                    </td>
                    <td>
                        <select></select>

                    </td>
                    <td>
                        <button type="button" onclick="DeleteDateItem(0)">删除行</button>
                    </td>

                </tr>-->


            </table>
            <button type="button" id="addFormProblem" class="btn btn-default" onclick="addProblem();">增加</button>

        </div>

        <a href="#" class="big-link" id="click1" data-reveal-id="myModal" hidden="hidden" data-animation="fade">jquery点我弹出</a>
        <!--<input type="text" id="text1" onclick="openDataEdit(this);" />
        <input type="text" id="text2" onclick="openDataEdit(this);" />-->

        <div id="myModal" class="reveal-modal">

            <textarea id="editor" placeholder="" autofocus=autofocus></textarea>
            <div align="center">
                <button type="button" class="btn btn-default" onclick="saveData();">保存数据</button>
            </div>
            <a class="close-reveal-modal">&times;</a>
        </div>
        @*<h4 class="container-fluid" style="text-align:center;">上级审阅意见</h4>
            <textarea class="form-control" readonly=readonly></textarea>*@
        <div align="center">
            <!--<button type="button" onclick="#" class="btn btn-default " style="text-align:center;">提交周报</button>-->
            <a href="ReportList.html" class="btn btn-default" style="display:none;">提交周报</a>
            <button type="submit" class="btn btn-default">提交周报</button>
        </div>

    }
    <script>
        var editor = new Simditor({
            textarea: $('#editor'),
            upload: false,
            toolbar: [//'title',
                     'bold',
                     'italic',
                     'underline',
                     'strikethrough',
                     'fontScale',
                     'color',
                     'ol'       ,
                     'ul'        ,
                     //'blockquote',
                     //'code'       ,
                     'table',
                     //'link',
                     //'image',
                     'hr'    ,
                     'indent',
                     'outdent',
                     'alignment',
            ]
            //optional options
        });

    </script>
</body>
</html>
