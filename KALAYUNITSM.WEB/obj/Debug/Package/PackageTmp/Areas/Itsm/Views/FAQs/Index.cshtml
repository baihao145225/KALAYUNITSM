@{
    Layout = "~/Views/Shared/_Index.cshtml";
}
<blockquote class="layui-elem-quote news_search">
    <div id="toolbar" class="layui-inline">
        <div class="layui-inline">
            <div class="layui-input-inline">
                <input type="text" id="keyword" placeholder="请输入关键字" class="layui-input search_input">
            </div>
            <a class="layui-btn search_btn layui-btn-small" id="btnSearch">查询</a>
        </div>
        <div id="layui-btn-group" class="layui-inline toolsTable"></div>
    </div>
</blockquote>
<div class="layui-form">
    <table class="layui-table" id="gridList" lay-filter="gridList"></table>
</div>
@section scripts {
    <script type="text/javascript">
        var table = layui.table;
        initGrid();
        $("#btnSearch").click(initGrid);
        $("#toolbar").authorizeButton(window.location.pathname);

        function initGrid() {
            var _curr = 0;
            var _count = 0;
            var _keyword = $("#keyword").val();

            table.render({
                elem: '#gridList',
                id: 'gridList',
                url: '/Itsm/FAQs/GetJsonData',
                cols: [[
                 { checkbox: true, fixed: true }
                 , { field: 'Name', title: '主题', width: 420, sort: true, templet: '#FaqsTpl' }
                 , { field: 'EnCode', title: '编码', width: 180 }
                 , { field: 'CategoryName', title: '知识类型', width: 120 }
                 , { field: 'Author', title: '提交人', width: 100 }
                 , { field: 'Hits', title: '访问量', sort: true }
                 , { field: 'CreateTime', title: '创建日期', templet: '#CreateDateTpl' }
                 , { field: 'IsEnable', title: '状态', width: 80, templet: '#IsEnableTpl' }
                ]],
                curr: _curr,
                where: { keyword: _keyword }
            });
        }

        function btn_add() {
            $.buttonAdd({
                title: "创建知识",
                content: "/Itsm/FAQs/Form",
            });
        }
        function btn_edit() {
            $.buttonEdit({
                title: "修改知识",
                content: "/Itsm/FAQs/Form"
            });
        }
        function btn_delete() {
            $.buttonChk({
                url: "/Itsm/FAQs/Delete"
            });
        }
        function btn_detail() {
            $.buttonDetail({
                title: "查看知识",
                content: "/Itsm/FAQs/Detail"
            });
        }
        function btn_open(url) {
            $.layerOpen({
                id: "detail",
                title: "查看",
                content: url,
                error: function (xhr, status, error) {
                    $.layerMsg(error, "error");
                },
                yes: function (layero, index) {
                },
                success: function (layero, index) {
                    layer.close(index);
                }, error: function (layero, index) {
                    layer.close(index);
                }
            });
        }
        function btn_export() {
            $.buttonExport({
                url: "/Itsm/FAQs/ExportExcel"
            });
        }
    </script>
}

