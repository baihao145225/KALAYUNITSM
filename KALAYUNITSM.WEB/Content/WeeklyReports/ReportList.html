<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>无标题文档</title>
  
    <link rel="stylesheet" type="text/css" href="styles/simditor.css" />
    <link rel="stylesheet" type="text/css" href="styles/bootstrap.css" />
    <!--<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>-->

    <script type="text/javascript" src="scripts/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="scripts/module.min.js"></script>
    <script type="text/javascript" src="scripts/hotkeys.min.js"></script>
    <script type="text/javascript" src="scripts/uploader.min.js"></script>
    <script type="text/javascript" src="scripts/simditor.js"></script>
    <!--<script type="text/javascript" src="scripts/simditor.min.js"></script>-->
    <!--<script src="http://www.jq22.com/jquery/1.6.4/jquery.min.js"></script>-->
    <script type="text/javascript" src="scripts/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="jquery.reveal.js"></script>
    <style type="text/css">
        .reveal-modal-bg {
            position: fixed;
            height: 100%;
            width: 100%;
            z-index: 100;
            display: none;
            top: 0;
            left: 0;
            background: rgba(00, 00, 00, 0.8);
        }

        .reveal-modal {
            visibility: hidden;
            top: 150px;
            left: 50%;
            margin-left: -300px;
            width: 520px;
            position: absolute;
            z-index: 101;
            padding: 30px 40px 34px;
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
            border-radius: 5px;
            -moz-box-shadow: 0 0 10px rgba(0,0,0,.4);
            -webkit-box-shadow: 0 0 10px rgba(0,0,0,.4);
            -box-shadow: 0 0 10px rgba(0,0,0,.4);
            background-color: #FFF;
        }

            .reveal-modal.small {
                width: 200px;
                margin-left: -140px;
            }

            .reveal-modal.medium {
                width: 400px;
                margin-left: -240px;
            }

            .reveal-modal.large {
                width: 600px;
                margin-left: -340px;
            }

            .reveal-modal.xlarge {
                width: 800px;
                margin-left: -440px;
            }

            .reveal-modal .close-reveal-modal {
                font-size: 22px;
                line-height: 0.5;
                position: absolute;
                top: 8px;
                right: 11px;
                color: #333;
                text-shadow: 0 -1px 1px rbga(0,0,0,.6);
                font-weight: bold;
                cursor: pointer;
            }

        body {
            background-color: #F2F2F2;
        }
    </style>
    <!--[if lt IE 9]><style>.reveal-modal-bg{filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#cc000000,endColorstr=#cc000000);}</style><![endif]-->
   <script>
       var inputId;
       var id = 0;
       var selectList = {
           "终端运维": "终端运维",
           "机房巡检": "机房巡检",
           "技术支持": "技术支持",
           "临时工作": "临时工作",
       };
       var workList = {
           "已完成": "A",
           "进展中": "B",
           "未开始": "C",
           "延期已完成": "D",
       };
       var dataTableList = {
           data: [
               {
                   "ProjectName": "终端运维",
                   "Content": "<p><b>1.启点畅行B端</b></p><p>1.1.自助下单功能讨论会议</p><p>1.2.完善目前系统代码</p><p>1.3.修复系统bug</p><p>1.4.自助下单后续功能改进推进</p><p>1.5.自助下单客户查询功能开发</p><p><b>2.启点畅行B端（html5）</b></p><p>2.1.部分页面修改讨论</p><p><b>3.启点畅行G端（html5）</b></p><p>3.1.下拉操作提示符移植</p><p>3.2.部分页面修改讨论</p><p><strike><b>4.专利相关文档编写</b></strike></p>",
                   "ChargeMan": "张三",
                   "Remark": "<p>应薛总要求询问中科软需求确定后的具体开发节点能否给出。</p><p>赵经理表示五一后可以联调</p><p><b>总体进度令人满意。</b></p><p>关于操作界面及流程能否按华油数码的界面进行改造</p><p><b><i>赵经理表示均按华油数码流程开发的</i></b></p><p>节后第一时间跟进项目</p>",
                   "Type": "进展中",

               },
               {
                   "ProjectName": "机房巡检",
                   "Content": "<p><b>1.启点畅行B端</b></p><p>1.1.自助下单功能讨论会议</p><p>1.2.完善目前系统代码</p><p>1.3.修复系统bug</p><p>1.4.自助下单后续功能改进推进</p><p>1.5.自助下单客户查询功能开发</p><p><b>2.启点畅行B端（html5）</b></p><p>2.1.部分页面修改讨论</p><p><b>3.启点畅行G端（html5）</b></p><p>3.1.下拉操作提示符移植</p><p>3.2.部分页面修改讨论</p><p><strike><b>4.专利相关文档编写</b></strike></p>",
                   "ChargeMan": "李四",
                   "Remark": "<p>应薛总要求询问中科软需求确定后的具体开发节点能否给出。</p><p>赵经理表示五一后可以联调</p><p><b>总体进度令人满意。</b></p><p>关于操作界面及流程能否按华油数码的界面进行改造</p><p><b><i>赵经理表示均按华油数码流程开发的</i></b></p><p>节后第一时间跟进项目</p>",
                   "Type": "已完成",
               },
               {
                   "ProjectName": "技术支持",
                   "Content": "<p><b>1.启点畅行B端</b></p><p>1.1.自助下单功能讨论会议</p><p>1.2.完善目前系统代码</p><p>1.3.修复系统bug</p><p>1.4.自助下单后续功能改进推进</p><p>1.5.自助下单客户查询功能开发</p><p><b>2.启点畅行B端（html5）</b></p><p>2.1.部分页面修改讨论</p><p><b>3.启点畅行G端（html5）</b></p><p>3.1.下拉操作提示符移植</p><p>3.2.部分页面修改讨论</p><p><strike><b>4.专利相关文档编写</b></strike></p>",
                   "ChargeMan": "王五",
                   "Remark": "<p>应薛总要求询问中科软需求确定后的具体开发节点能否给出。</p><p>赵经理表示五一后可以联调</p><p><b>总体进度令人满意。</b></p><p>关于操作界面及流程能否按华油数码的界面进行改造</p><p><b><i>赵经理表示均按华油数码流程开发的</i></b></p><p>节后第一时间跟进项目</p>",
                   "Type": "延期已完成",
               }
           ]
       }
       $(document).ready(function () {

           //getTableData();



       });
       function openDataEdit(e)
       {
           inputId = $(e);
           if (inputId.val().length == 0)
           {
               $("#myModal").html(inputId.val());
               //$(".simditor-body").html("<p>&nbsp;</p>");           //有个bug，如果是空的弹出来输入法会有点问题，加一个判定
           }
           else
           {
               $("#myModal").html(inputId.val());
               //$(".simditor-body").html(inputId.val());
           }
          
           $('#click1').click();
           //$(".simditor-body").focus();
       }
       function saveData()
       {
           $('.reveal-modal-bg').click();
           inputId.val($("#editor").val());
           UpdateNumber();
       }
     
       function UpdateNumber()                  //这个方法是将所有输入框的name id按照数字顺序重新命名 防止有ListTest[0].Name，ListTest[3].Name这种错乱的，方便MVC直接赋值
       {
           $('#TableData tr').each(function (i) {
               var dataItemTr = $(this);      //找到table里的每一行tr
               $(dataItemTr).children().each(function (j) {
                   try {
                       var inputItemTd = $(this);     //每一行tr里的td
                       $(inputItemTd).children().each(function (k) {
                           var inputItem = $(this);     //这是每一个td里的input框
                           var name = inputItem.attr("name");
                           if (name != undefined) {
                               //alert(name);
                               if (name.indexOf("No") > 0)          //这个是检查序号的，排序
                               {
                                   inputItem.val((i+1));
                               }
                               var name1 = "111";
                               var nameNumberTemp = name.substr(name.indexOf("[") + 1, name.indexOf("]") - name.indexOf("[") - 1);  //取出来的错乱数字
                               name = name.replace(nameNumberTemp, i);                      //重新修改所有输入框的ID NAME的数字顺序
                               inputItem.attr("name", name);        //重新命名Name
                               inputItem.attr("id", name);          //重新命名ID
                           }                        
                       });              
                   } catch (e)
                   {
                       
                   }
                 
               })
           })
       }
       function checkSelect(item)                   //每个选择项目只能用一次，多了就要发出警告
       {
           var SelectValue = $(item);
           var count = 0;
           $('#TableData select').each(function (i)
           {      
               var selectTemp = $(this);
               if (selectTemp.val() == SelectValue.val()) {
                   count++;
                   if (count >=2) {
                       alert("不可添加重复项目");
                       SelectValue.val("");
                       count = 0;
                       return false;
                   }
               }                    
           });
       }
       function addForm() {
           var FormData = $('#TableData');
           var html = "    <tr id =" + id + ">";
           html += "<td class=\"col-xs-1\">";
           html += "<input  class=\"form-control\" type=\"text\" name=\"ListTest[" + id + "].No\" id=\"ListTest[" + id + "].No\" value=" + (id + 1) + " readonly />"
           html +=     " </td>";
           html += " <td>";
           html += "<select  class=\"form-control\" name=\"ListTest[" + id + "].ProjectName\" id=\"ListTest[" + id + "].ProjectName\" onchange=\"checkSelect(this);\">";
           html += "<option disabled selected value>--请选择--</option>";
           for(var i in selectList){             
               html += "<option value="+i+">"+selectList[i]+"</option>";
           }
           html += "</select></td>";
                        
           html +=  "<td>";
           html += " <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].Content\" id=\"ListTest[" + id + "].Content\"  onclick=\"openDataEdit(this);\" />";
           html +=    " </td>";
           html +=     "  <td>";
           html += "   <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].ChargeMan\" id=\"ListTest[" + id + "].ChargeMan\"  />";
           html += " </td>";
           html += "  <td>";
           html += "   <input type=\"date\"  class=\"form-control\" name=\"ListTest[" + id + "].Time\" id=\"ListTest[" + id + "].Time\"  />";
           html += " </td>";
           html += "  <td>";
           html += "   <input type=\"date\"  class=\"form-control\" name=\"ListTest[" + id + "].EndTime\" id=\"ListTest[" + id + "].EndTime\"  />";
           html += " </td>";
           html += "  <td>";
           html += "   <input type=\"text\"  class=\"form-control\" name=\"ListTest[" + id + "].Remark\" id=\"ListTest[" + id + "].Remark\" onclick=\"openDataEdit(this);\"  />";
           html += " </td>";
           html += " <td>";
           html += "<select  class=\"form-control\" name=\"ListTest[" + id + "].Type\" id=\"ListTest[" + id + "].Type\">";
           for (var i in workList) {
               html += "<option value=" + workList[i] + ">" +i + "</option>";
           }
           html += "</select></td>";
           html +=  "    <td>";
           html +=        "  <button type=\"button\"  onclick=\"DeleteDateItem('"+id+"')\" class=\"btn btn-default\">删除行</button>";
           html +=      "</td>";

           html +=     "</tr>";
           //var html = "<div class=\"dataItem\" id=\"" + id + "\">";
           //html += "<input type=\"text\" name=\"ListTest[" + id + "].Name\" id=\"ListTest[" + id + "].Name\" onclick=\"openDataEdit(this);\" /><input type=\"text\" name=\"ListTest[" + id + "].Age\" id=\"ListTest[" + id + "].Age\" onclick=\"openDataEdit(this);\" /> ";
           //html += "<button type=\"button\" onclick=\"DeleteDateItem(" + id + ")\">删除行</button></div>";
           id++;
           $(FormData).append(html);
       }
       function DeleteDateItem(idNumber)
       {
           $("#" + idNumber).remove();
       }
       function getTableData()
       {
           var FormData = $('#getTableData');
           $(FormData).html("");
           var id = 0;
           for (var z = 0; z < dataTableList.data.length; z++)
           {
               var item = dataTableList.data[z];
               var html = "    <tr id =l" + id + ">";
               html += "<td  class=\"col-xs-1\">";
               html += "<input type=\"text\" class=\"form-control\" name=\"ListTest[" + id + "].No\" id=\"ListTest[" + id + "].No\" value=l" + (id + 1) + " readonly />"
               html += " </td>";
               html += " <td>";
               html += "<select class=\"form-control\" name=\"ListTest[" + id + "].ProjectName\" id=\"ListTest[" + id + "].ProjectName\"  disabled=\"true\" onchange=\"checkSelect(this);\">";
               html += "<option disabled selected value>--请选择--</option>";
               for (var i in selectList) {
                   if (item.ProjectName == i)
                   {
                       html += "<option value=" + i + "  selected=\"selected\" >" + selectList[i] + "</option>";
                   }
                   else
                   {
                       html += "<option value=" + i + ">" + selectList[i] + "</option>";
                   }
                  
               }
               html += "</select></td>";

               var now = new Date();
              
               //格式化日，如果小于9，前面补0  
               var day = ("0" + now.getDate()).slice(-2);
               
               //格式化月，如果小于9，前面补0  
               var month = ("0" + (now.getMonth() + 1)).slice(-2);
               //拼装完整日期格式  
               var today = now.getFullYear() + "-" + (month) + "-" + (day);
               //完成赋值  
             
               
               html += "<td>";
               html += " <input type=\"text\" class=\"form-control\" name=\"ListTest[" + id + "].Content\" id=\"ListTest[" + id + "].Content\" value='" + item.Content + "' readonly  onclick=\"openDataEdit(this);\" />";
               html += " </td>";
               html += "  <td>";
               html += "   <input type=\"text\" class=\"form-control\" name=\"ListTest[" + id + "].ChargeMan\" id=\"ListTest[" + id + "].ChargeMan\" value='" + item.ChargeMan + "' readonly />";
               html += " </td>";
               html += "  <td>";
               html += "   <input type=\"date\" class=\"form-control\" name=\"ListTest[" + id + "].Time\" id=\"ListTest[" + id + "].Time\" value='" + today + "'   readonly />";
               html += " </td>";
               html += "  <td>";
               html += "   <input type=\"date\" class=\"form-control\" name=\"ListTest[" + id + "].EndTime\" id=\"ListTest[" + id + "].EndTime\" value='" + today + "'  readonly  />";
               html += " </td>";
               html += "  <td>";
               html += "   <input type=\"text\" class=\"form-control\" name=\"ListTest[" + id + "].Remark\" id=\"ListTest[" + id + "].Remark\" value='" + item.Remark + "' readonly onclick=\"openDataEdit(this);\"  />";
               html += " </td>";
               html += " <td>";
               html += "<select class=\"form-control\" name=\"ListTest[" + id + "].Type\" id=\"ListTest[" + id + "].Type\" value='" + item.Type + "' disabled=\"true\">";
               for (var i in workList) {
                   if (item.Type == i)
                   {
                       html += "<option value=" + workList[i] + " selected=\"selected\">" + i + "</option>";
                   }
                   else
                   {
                       html += "<option value=" + workList[i] + ">" + i + "</option>";
                   }
                   
               }
               html += "</select></td>";
               //html += "    <td>";
               //html += "  <button type=\"button\" onclick=\"DeleteDateItem('l" + id + "')\"  class=\"btn btn-default\">删除行</button>";
               //html += "</td>";

               html += "</tr>";
               //var html = "<div class=\"dataItem\" id=\"" + id + "\">";
               //html += "<input type=\"text\" name=\"ListTest[" + id + "].Name\" id=\"ListTest[" + id + "].Name\" onclick=\"openDataEdit(this);\" /><input type=\"text\" name=\"ListTest[" + id + "].Age\" id=\"ListTest[" + id + "].Age\" onclick=\"openDataEdit(this);\" /> ";
               //html += "<button type=\"button\" onclick=\"DeleteDateItem(" + id + ")\">删除行</button></div>";
               id++;
               $(FormData).append(html);
           }
       }
   </script>

 </head>
 <body>
   <div id="getData">
       <h4 class="container-fluid" style="text-align:center;">我的周报列表</h4>
       <table class="table table-striped">
           <tr>
               <td>
                   序号
               </td>
               <td>
                   报告日期
               </td>
               <!--<td>
                   工作内容
               </td>-->
               <td>
                   周报状态
               </td>
               <td>
                   提交领导
               </td>
               <td>
                   领导意见
               </td>
               <td>
                   周报编辑
               </td>
               <td>
                   查看详情
               </td>
               
               <!--<td>
                   删除
               </td>-->
           </tr>

           <tbody id="getTableData" class=".table-striped">
               <tr>
                   <td class="col-xs-1">
                       <input type="text" readonly=readonly class="form-control" value="1" />
                   </td>
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="2018-4-28" />
                   </td>
                   <!--<td>
                       <input type="text" readonly=readonly class="form-control" value="1" onclick="openDataEdit(this);" />
                   </td>-->
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="已提交/未审核" />
                   </td>
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="刘珺" />
                   </td>
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="" onclick="openDataEdit(this);" />
                   </td>
                   <td>
                       <button type="button" class="btn btn-default" disabled>编辑周报</button>
                   </td>
                   <td>
                       <a href="ReportInfo.html" class="btn btn-default">周报详情</a>
                       <!--<button type="button" class="btn btn-default" >周报详情</button>-->
                   </td>
               </tr>
               <tr>
                   <td class="col-xs-1">
                       <input type="text" readonly=readonly class="form-control" value="2" />
                   </td>
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="2018-4-20" />
                   </td>
                   <!--<td>
                       <input type="text" readonly=readonly class="form-control" value="1" onclick="openDataEdit(this);" />
                   </td>-->
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="已通过" />
                   </td>
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="刘珺" />
                   </td>
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="<p>关于<b>第一点</b>，我持保留意见。</p><p>对于接入G端一事可以让美工进行页面优化</p><p>基本同意<br /><br /></p>" onclick="openDataEdit(this);" />
                   </td>
                   <td>
                       <button type="button" class="btn btn-default" disabled>编辑周报</button>
                   </td>
                   <td>
                       <a href="ReportInfo.html" class="btn btn-default">周报详情</a>
                   </td>
               </tr>
               <tr>
                   <td class="col-xs-1">
                       <input type="text" readonly=readonly class="form-control" value="3" />
                   </td>
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="2018-4-13" />
                   </td>
                   <!--<td>
                       <input type="text" readonly=readonly class="form-control" value="1" onclick="openDataEdit(this);" />
                   </td>-->
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="未通过" />
                   </td>
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="刘珺" />
                   </td>
                   <td>
                       <input type="text" readonly=readonly class="form-control" value="<p><b>暂不考虑与中科软同事外出考察的工作安排</b><br /></p><p><i>第三条叙述太过琐碎，请适当精简文字。</i></p>" onclick="openDataEdit(this);" />
                   </td>
                   <td>
                       <!--<button type="button" class="btn btn-default">编辑周报</button>-->
                       <a href="Index.html" class="btn btn-default">编辑周报</a>
                   </td>
                   <td>
                       <a href="ReportInfo.html" class="btn btn-default">周报详情</a>
                   </td>
               </tr>
           </tbody>

       </table>
       <button type="button" onclick="getTableData();" class="btn btn-default " style="display:none;">获取工作</button>
    </div>

     <div id="FormData" hidden>
         <h4 class="container-fluid" style="text-align:center;">自定工作</h4>
         <table class="table table-striped">
             <tr>
                 <td>
                     序号
                 </td>
                 <td>
                     工作项目
                 </td>
                 <td>
                     工作内容
                 </td>
                 <td>
                     负责人
                 </td>
                 <td>
                     开始日期
                 </td>
                 <td>
                     结束日期
                 </td>
                 <td>
                     完成情况
                 </td>
                 <td>
                     状态
                 </td>
                 <td>
                     删除
                 </td>
             </tr>

             <tbody id="TableData" ></tbody>

         

         </table>
         <button type="button" id="addForm" class="btn btn-default" onclick="addForm();">点我增加</button>
   
     </div>


  <a href="#" class="big-link" id="click1" data-reveal-id="myModal"hidden="hidden" data-animation="fade">jquery点我弹出</a>
 
     <div id="myModal" class="reveal-modal"> 
      
      <textarea id="editor" placeholder="Balabala" autofocus hidden="hidden"></textarea>
         <button type="button" onclick="saveData();" >保存数据</button>
 
   <a class="close-reveal-modal">&times;</a>
  </div> 
     
     <script>
         var editor = new Simditor({
             textarea: $('#editor'),
             upload: false,
             toolbar: [//'title',
                      'bold',
                      'italic',
                      'underline',
                      'strikethrough',
                      'fontScale',
                      'color',
                      'ol'       ,
                      'ul'        ,    
                      //'blockquote',
                      //'code'       ,   
                      'table',
                      //'link',
                      //'image',
                      'hr'    ,       
                      'indent',
                      'outdent',
                      'alignment',
         ]
             //optional options
         });

     </script>
 </body>
</html>